# Intuition

# Additional Information

# Complexity
- Time complexity: $$O(M * log(N))$$
<!-- Add your time complexity here, e.g. $$O(n)$$ -->

- Space complexity: $$O(log(N))$$
<!-- Add your space complexity here, e.g. $$O(n)$$ -->

# Code
```cpp
# define MODS 1000000007

int prefix_powers[33] = {0};

class Solution {
public:
    long long modPower(long long base, long long exp) {
        long long res = 1;
        while( exp ) {
            if( exp & 1 ) res = (res * base) % MODS;
            base = (base * base) % MODS;
            exp >>= 1;
        }
        return res;
    }

    vector<int> productQueries(int n, vector<vector<int>>& queries) {
        const int len = queries.size();
        vector<int> ans(len);

        int i = 0, mask = 0;
        for( ; mask < 31; ++mask ) {
            if( n & (1 << mask) ) {
                prefix_powers[i + 1] = prefix_powers[i] + mask;
                i++;
            }
        }

        for( int j = 0; j < len; ++j ) {
            vector<int>& q = queries[j];
            long long sum_power = prefix_powers[q[1] + 1] - prefix_powers[q[0]];
            ans[j] = modPower(2, sum_power);
        }

        return ans;
    }
};
```
